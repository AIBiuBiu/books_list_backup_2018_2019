#  如何实现高可用 ROI要求下创业公司的可选方案

  [不可用的原因](https://en.wikipedia.org/wiki/High_availability#cite_note-15)
  
  2010年学术可用性专家的一项调查分析了企业IT系统不可用的原因。所有原因均指未遵循以下每个方面的最佳做法（按重要性排序）：[13]
  
  + 监控相关组件
  + 要求和采购
  + 操作
  + 避免网络故障
  + 避免内部应用程序故障
  + 避免失败的外部服务
  + 物理环境
  + 网络冗余
  + 备份技术方案
  + 备份的处理解决方案
  + 物理位置
  + 基础设施冗余
  + 存储架构冗余

  我们首先看一下现在使用了公有云单一部署的情况 可以解决什么问题？ 
   + 监控相关组件
   + 要求和采购
   + 操作
   + 避免网络故障
   + 避免失败的外部服务
   + 物理环境
   + 网络冗余
   + 备份技术方案
   + 备份的处理解决方案
   + 基础设施冗余
   + 存储架构冗余
  
  再看一下现在使用了公有云分布式系统部署（单一Zone）的情况
   + 监控相关组件
   + 要求和采购
   + 操作
   + 避免网络故障
   + 避免内部应用程序故障
   + 避免失败的外部服务
   + 物理环境
   + 网络冗余
   + 备份技术方案
   + 备份的处理解决方案
   + 基础设施冗余
   + 存储架构冗余
  
  [如果公有云故障不可避免，那云上高可用架构该如何设计？](http://blog.fit2cloud.com/2016/08/14/ha-on-cloud-design.html)
 
  为了支持云上用户更好使用和部署业务，也为了云厂商能够更加标准化自身服务。公有云供应商在基础设施层面普遍会提供如下几个关键抽象设计：
  
  + Region（区域）：Region是公有云厂商为一个区域最终用户提供服务的抽象能力。它设计的初衷主要是为了 1）降低云上业务到达最终用户的网络延时；2）符合不同区域的数据及业务服务法规。
  + Avaliable Zone（AZ、可用区）：可用区是一个物理上相互隔离，网络、电力等供应相互独立的基础设施区域，可以简单理解为云基础设施可用性保障的最小单元。不同可用区之间的可用性是相互完全独立，互不影响。需要注意的是可用区同样是一个抽象概念，它并不等同于我们日常所述的数据中心（或者机房）。一个可用区可以由多个物理数据中心组成。

+ 建议1：请尽量选择有多个可用区的公有云Region部署您的业务，这是实现云上业务高可用的前提条件!
+ 建议2：尽管您可以完全自己控制计算资源跨可用区的均衡部署，但是还是尽可能使用云供应商提供的内建服务。它们会让这个过程变得非常简单，而且可靠。
 ROI要求下创业公司的可选方案 
+ 建议3：为生产环境RDS或者Cache集群开启Multi-AZ部署功能是一个推荐的最佳实践。这样您的数据存储服务就自动拥有了跨可用区的高可用能力，并且在一个可用区出现故障后能够自动切换到另外一个可用区的节点。
+ 建议4：为一个应用在不同可用区中创建均衡的子网（包括数目和子网包含的虚拟IP空间）是一个推荐的实践。这样一方面可以实现网络的高可用，另外一方面也方便计算资源和存储资源能够均衡落到不同的可用区。
 
#  但是考虑到一点，创业公司的ROI要求很高，同时维持多个系统 多区域同时部署的运维，系统设计开发成本无法负担？
 
 实际主要解决的就是实际情况下，公有云在30min-24H/year 下的问题。并且要考虑到创业公司的ROI问题，
 无法同时多ZoNe,多区块部署同样的系统，运维和服务的成本高昂，且相关开源工具k8s不提供跨区域和可用性。
  
  参考架构：
    + 要实现AWS上计算资源的跨可用区的架构，就可以结合如上ELB + Auto-Scaling + EC2的模式，非常直接和高效地实现整个业务的跨可用区高可用设计
   
   ![要实现AWS上计算资源的跨可用区的架构，就可以结合如上ELB + Auto-Scaling + EC2的模式，非常直接和高效地实现整个业务的跨可用区高可用设计](http://blog.fit2cloud.com/images/2016-08-14/aws-web-hosting.png)
    
  #  但是出于成本考虑，必须对服务进行降级，即冗余的系统只是对原系统的一个降级方案下的支持，而不是完整的copy。
    
   降级规则和方式：
    
   + 区域部署和区域服务
   + ip部署 ip过滤
   + 用户价值筛选和用户隔离
   + 产品服务和产品可用性分级
   + 体验需求和体验降级
   + 技术冗余成本考虑下的降级
   
    
    [关于高可用的系统](https://coolshell.cn/articles/17459.html)
 
 
 
 [参考]